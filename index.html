<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=yes">
    <title>Test</title>

    <link rel="stylesheet" href="http://js.arcgis.com/3.12/esri/css/esri.css">
    <style>
        html, body, #map {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }
    </style>

    <script src="http://js.arcgis.com/3.12/"></script>
    <script src="terraformer.min.js"></script>
    <script src="terraformer-arcgis-parser.min.js"></script>
    <script>
        var map, gjl;

      

        require(['esri/map', "esri/layers/ArcGISDynamicMapServiceLayer", 'geojsonlayer.js', "esri/geometry/Extent", ],
            function (Map, ArcGISTiledMapServiceLayer, GeoJsonLayer, Extent) {

                var mode, tile, bounds;

                mode = "esri";
                //mode = "nrcan";

                switch (mode) {
                    case "esri":
                        tile = "http://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer";

                        bounds = new Extent({
                            "xmin": -14503036,
                            "ymin": 8607219,
                            "xmax": -10450934,
                            "ymax": 9293814,
                            "spatialReference": { "wkid": 3857 }
                        });

                        break;
                    case "nrcan":
                        tile = "http://geoappext.nrcan.gc.ca/arcgis/rest/services/BaseMaps/CBMT3978/MapServer";
                        bounds = new Extent({
                            "xmin": -2927995,
                            "ymin": -841402,
                            "xmax": 2675891,
                            "ymax": 2992469,
                            "spatialReference": { "wkid": 3978 }
                        });
                        break;
                }

              
                var baseLayer = new ArcGISTiledMapServiceLayer(tile, {
                    id: "basemapLayer"
                });


                //map = new Map("map", { logo: false, basemap: "gray" } );
                map = new Map("map", {
                    logo: false,
                    extent: bounds
                });
                gjl = new GeoJsonLayer({ url: 'canada.json' });
                map.addLayer(baseLayer);
                //gjl.spatialReference.wkid = 3978;
                map.addLayer(gjl);
            }
        );

    </script>



</head>

<body>
    <div id="map"></div>

    
</body>
</html>
